<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><title>hadoop离线计算-3：Hadoop分布式计算框架MapReduce | zh小企鹅</title><meta name="description" content="hadoop离线计算-3：Hadoop分布式计算框架MapReduce"><meta name="keywords" content="hadoop"><meta name="author" content="zheroic"><meta name="copyright" content="zheroic"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon1.png"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="canonical" href="https://zheroic.github.io/2019/10/14/hadoop-3/"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:title" content="hadoop离线计算-3：Hadoop分布式计算框架MapReduce"><meta name="twitter:description" content="hadoop离线计算-3：Hadoop分布式计算框架MapReduce"><meta name="twitter:image" content="https://pic.superbed.cn/item/5da48963451253d1788afc67.png"><meta property="og:type" content="article"><meta property="og:title" content="hadoop离线计算-3：Hadoop分布式计算框架MapReduce"><meta property="og:url" content="https://zheroic.github.io/2019/10/14/hadoop-3/"><meta property="og:site_name" content="zh小企鹅"><meta property="og:description" content="hadoop离线计算-3：Hadoop分布式计算框架MapReduce"><meta property="og:image" content="https://pic.superbed.cn/item/5da48963451253d1788afc67.png"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="prev" title="software-requirement-3" href="https://zheroic.github.io/2019/10/15/software-requirement-3/"><link rel="next" title="数据科学导论-2：数据统计" href="https://zheroic.github.io/2019/10/08/data-science-2/"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.css"><script src="https://cdn.jsdelivr.net/gh/upupming/gitalk@36368e5dffd049e956cdbbd751ff96c28d8255cf/dist/gitalk.min.js"></script><script src="https://cdn.jsdelivr.net/npm/blueimp-md5@2.10.0/js/md5.min.js"></script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容:${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://xxx/","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  highlight_copy: 'true',
  highlight_lang: 'true',
  highlight_shrink: 'false',
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    title: '添加书签',
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天'

  
}</script><link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css"></head><body><div id="web_bg"></div><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div class="auto_open" id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Hadoop分布式计算框架MapReduce"><span class="toc-text">Hadoop分布式计算框架MapReduce</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#MapReduce-简介"><span class="toc-text">MapReduce 简介</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#大规模数据处理时，MapReduce在三个层面上的基本构思。"><span class="toc-text">大规模数据处理时，MapReduce在三个层面上的基本构思。</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MapReduce-计算模型"><span class="toc-text">MapReduce 计算模型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#主要由Map和Reduce两部分组成。"><span class="toc-text">主要由Map和Reduce两部分组成。</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MapReduce示例-文档词频统计WordCount"><span class="toc-text">MapReduce示例-文档词频统计WordCount</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MapReduce编程模型-wordCount"><span class="toc-text">MapReduce编程模型-wordCount</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MapReduce数据流"><span class="toc-text">MapReduce数据流</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MapReduce-编程模型-inputFormat"><span class="toc-text">MapReduce 编程模型-inputFormat</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MapReduce-编程模型-split和block"><span class="toc-text">MapReduce 编程模型-split和block</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MapReduce编程模型-inputFormat"><span class="toc-text">MapReduce编程模型-inputFormat</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MapReduce编程模型-partitioner"><span class="toc-text">MapReduce编程模型-partitioner</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MapReduce编程模型-OutputFormat"><span class="toc-text">MapReduce编程模型-OutputFormat</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MapReduce-编程模型"><span class="toc-text">MapReduce 编程模型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MapReduce-Shuffle和排序"><span class="toc-text">MapReduce Shuffle和排序</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Map端："><span class="toc-text">Map端：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Reduce端："><span class="toc-text">Reduce端：</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MapReduce-Combiner函数"><span class="toc-text">MapReduce Combiner函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MapReduce-压缩"><span class="toc-text">MapReduce 压缩</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MapReduce-调优"><span class="toc-text">MapReduce 调优</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#序列化-amp-反序列化"><span class="toc-text">序列化&amp;反序列化</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MapReduce常用数据类型"><span class="toc-text">MapReduce常用数据类型</span></a></li></ol></li></ol></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(https://pic.superbed.cn/item/5da48963451253d1788afc67.png)"><div id="page-header"><span class="pull-left"> <a class="blog_title" id="site-name" href="/">zh小企鹅</a></span><div class="open toggle-menu pull-right"><div class="menu-icon-first"></div><div class="menu-icon-second"></div><div class="menu-icon-third"></div></div><div class="menu_mask"></div><span class="pull-right menus"><div class="mobile_author_icon"><img class="lozad avatar_img" src="https://pic.superbed.cn/item/5da4889d451253d1788ae932.png" onerror="onerror=null;src='/img/friend_404.gif'"></div><div class="mobile_post_data"><div class="mobile_data_item text-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">15</div></a></div></div><div class="mobile_data_item text-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">7</div></a></div></div><div class="mobile_data_item text-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">4</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/contact/"><i class="fa-fw fa fa-comments"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于我</span></a></div><script>document.body.addEventListener('touchstart', function(){ });</script></div></span><span class="pull-right"><a class="site-page social-icon search"><i class="fa fa-search fa-fw"></i><span> 搜索</span></a></span></div><div id="post-info"><div id="post-title"><div class="posttitle">hadoop离线计算-3：Hadoop分布式计算框架MapReduce</div></div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 发表于 2019-10-14<span class="post-meta__separator">|</span><i class="fa fa-history" aria-hidden="true"></i> 更新于 2019-10-15</time><span class="post-meta__separator mobile_hidden">|</span><span class="mobile_hidden"><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/大数据/">大数据</a></span><div class="post-meta-wordcount"><span>字数总计: </span><span class="word-count">1.9k</span><span class="post-meta__separator">|</span><span>阅读时长: 6 分钟</span><span class="post-meta__separator">|</span><span>阅读量: </span><span id="busuanzi_value_page_pv"></span></div></div></div></div><div class="layout layout_post" id="content-inner">   <article id="post"><div class="article-container" id="post-content"><h1 id="Hadoop分布式计算框架MapReduce"><a href="#Hadoop分布式计算框架MapReduce" class="headerlink" title="Hadoop分布式计算框架MapReduce"></a>Hadoop分布式计算框架MapReduce</h1><h2 id="MapReduce-简介"><a href="#MapReduce-简介" class="headerlink" title="MapReduce 简介"></a>MapReduce 简介</h2><ul>
<li>基于集群的高性能并行计算平台(Cluster Infrastructure)</li>
<li>并行程序开发与运行框架(Software Framework)</li>
<li>并行程序设计模型与方法(Programming Model &amp; Methodology)</li>
</ul>
<h3 id="大规模数据处理时，MapReduce在三个层面上的基本构思。"><a href="#大规模数据处理时，MapReduce在三个层面上的基本构思。" class="headerlink" title="大规模数据处理时，MapReduce在三个层面上的基本构思。"></a>大规模数据处理时，MapReduce在三个层面上的基本构思。</h3><ul>
<li>如何对付大数据处理：分而治之</li>
<li>上升到抽象模型：Mapper与Reducer</li>
<li>上升到构架：统一构架，为程序员隐藏系统层细节 </li>
</ul>
<h2 id="MapReduce-计算模型"><a href="#MapReduce-计算模型" class="headerlink" title="MapReduce 计算模型"></a>MapReduce 计算模型</h2><p><img alt data-src="https://pic.superbed.cn/item/5da48955451253d1788af905.png" class="lozad"></p>
<h3 id="主要由Map和Reduce两部分组成。"><a href="#主要由Map和Reduce两部分组成。" class="headerlink" title="主要由Map和Reduce两部分组成。"></a>主要由Map和Reduce两部分组成。</h3><ul>
<li>Reduce阶段在Map阶段执行结束之后执行。</li>
<li>Map阶段的输出结果作为Reduce阶段的输入结果。</li>
<li>Reduce阶段的输入结果对应于多个Map的输出结果。</li>
<li>Reduce阶段计算最终结果并将结果输出。</li>
</ul>
<h2 id="MapReduce示例-文档词频统计WordCount"><a href="#MapReduce示例-文档词频统计WordCount" class="headerlink" title="MapReduce示例-文档词频统计WordCount"></a>MapReduce示例-文档词频统计WordCount</h2><p><img alt data-src="https://pic.superbed.cn/item/5da48943451253d1788af5aa.png" class="lozad"></p>
<h2 id="MapReduce编程模型-wordCount"><a href="#MapReduce编程模型-wordCount" class="headerlink" title="MapReduce编程模型-wordCount"></a>MapReduce编程模型-wordCount</h2><ul>
<li>输入数据：一系列key/value对。</li>
<li>用户实现两个函数，map和reduce。</li>
<li>Map(k,v)-&gt;list(k1,v1) </li>
<li>Reduce(k,list(v1))-&gt; v2 </li>
<li>(k1,v1)是中间key/value的结果对。</li>
<li>Output:一系列的（k2,v2）对。</li>
</ul>
<p><strong>MapReduce将作业分成两个阶段：Map阶段和Reduce阶段。</strong></p>
<ul>
<li>Map阶段由一定数量的MapTask组成。<ul>
<li>输入数据格式解析：InputFormat</li>
<li>输入数据处理：Mapper</li>
<li>数据分组：Partitioner</li>
</ul>
</li>
<li>Reduce阶段由一定数量的ReduceTask组成。<ul>
<li>数据远程拷贝</li>
<li>数据按照key进行排序。</li>
<li>数据处理：Reducer</li>
<li>数据输出格式：OutputFormat</li>
</ul>
</li>
</ul>
<p><img alt data-src="https://pic.superbed.cn/item/5da4895a451253d1788afaa3.png" class="lozad"></p>
<h2 id="MapReduce数据流"><a href="#MapReduce数据流" class="headerlink" title="MapReduce数据流"></a>MapReduce数据流</h2><p><img alt data-src="https://pic.superbed.cn/item/5da48946451253d1788af620.png" class="lozad"></p>
<ul>
<li>数据分片：等长的数据块，每个分片对应一个map任务。分片的大小很大程度影响了map执行的效率。建议分片大小和hdfs数据块大小相同。“输入分片”并非数据本身，而是逻辑上的分片长度和数据位置数组。</li>
<li>Map任务结果并非保存在hdfs：临时数据。Map失败后会在其他节点上启动map。</li>
<li>Reduce的任务数量并非由输入数据大小指定，而事实上是独立指定的。<strong>Map:reduce=n:m</strong></li>
<li>Partition:map输出结果会根据reduce个数进行分区，默认是hash函数来分区，也可以自定义(partition函数)。 </li>
<li>Shuffle:map和reduce之间的数据流。每个reduce的输入来自于多个map任务的输出。在这个阶段，参数调优对job的运行时间有很大的影响。是奇迹发生的地方。</li>
</ul>
<h2 id="MapReduce-编程模型-inputFormat"><a href="#MapReduce-编程模型-inputFormat" class="headerlink" title="MapReduce 编程模型-inputFormat"></a>MapReduce 编程模型-inputFormat</h2><p>InputFormat接口定义的方法就是如何读取文件和分割文件以提供分片给mapper。<br>TextInputFormat是InputFormat的默认实现类。<br>通过使用InputFormat，MapReduce可以做到：</p>
<ul>
<li>验证作业的输入的正确性</li>
<li>把输入文件切分成多个逻辑块（InputSplit），并把它们分发给一个单独的MapperTask。</li>
<li>实例化一个能在每个InputSplit类上工作的RecordReader的实现，这个RecordReader从指定的InputSplit中正确读出一条一条的Ｋ－Ｖ对，这些Ｋ－Ｖ对将由我们写的Mapper方法处理。</li>
</ul>
<h2 id="MapReduce-编程模型-split和block"><a href="#MapReduce-编程模型-split和block" class="headerlink" title="MapReduce 编程模型-split和block"></a>MapReduce 编程模型-split和block</h2><ul>
<li>Block（块）<ul>
<li>HDFS中存储数据的最小单元。</li>
<li>默认大小是128MB。 </li>
</ul>
</li>
<li>Split（分片）<ul>
<li>Mapreduce中最小计算单元。</li>
<li>分片并非数据本身，而是记录一个分片的长度和分片数据位置信息的数组。</li>
<li>每个Split对应一个MapTask。</li>
<li>默认split数量和Block一一对应。</li>
<li>Block和split的关系是任意的，可由用户控制。</li>
</ul>
</li>
<li>文件大小&lt;=块容量(128M)：每个文件对应一个InputSplit。</li>
<li>文件大小&gt;块容量(存在多个块时)：使用更为复杂的公式来计算InputSplit大小。<ul>
<li>InputSplitSize = Max(minSplitSize, Min(blockSize, maxSplitSize))</li>
<li>minSplitSize = mapreduce.input.fileinputformat.split.minsize</li>
<li>blockSize = dfs.blocksize</li>
<li>maxSplitSize=mapreduce.input.fileinputformat.split.maxsize</li>
<li>minSplitSize默认值=1；maxSplitSize默认值=Long.MAX_VALUE;</li>
</ul>
</li>
<li>分片数量=文件大小/分片大小(splitNum = totalsize / inputSplitSize) </li>
<li>得出以下结论：<ul>
<li>如果想增加map数量：需要调小maxSplitSize的值。</li>
<li>如果想减少map数量：需要调大minSplitSize的值。</li>
</ul>
</li>
</ul>
<p><img alt data-src="https://pic.superbed.cn/item/5da48950451253d1788af7f2.png" class="lozad"></p>
<h2 id="MapReduce编程模型-inputFormat"><a href="#MapReduce编程模型-inputFormat" class="headerlink" title="MapReduce编程模型-inputFormat"></a>MapReduce编程模型-inputFormat</h2><p><img alt data-src="https://pic.superbed.cn/item/5da4895d451253d1788afb7b.png" class="lozad"></p>
<h2 id="MapReduce编程模型-partitioner"><a href="#MapReduce编程模型-partitioner" class="headerlink" title="MapReduce编程模型-partitioner"></a>MapReduce编程模型-partitioner</h2><ul>
<li>Partitioner决定Map的输出结果交给哪个Reducer Task来处理。</li>
<li>默认实现：hash partitioner <ul>
<li>Key的hash值%reduce Task数量。</li>
</ul>
</li>
<li>自定义Partitioner。 <ul>
<li>控制相同的类的数据作为一个单独的文件输出。</li>
</ul>
</li>
</ul>
<h2 id="MapReduce编程模型-OutputFormat"><a href="#MapReduce编程模型-OutputFormat" class="headerlink" title="MapReduce编程模型-OutputFormat"></a>MapReduce编程模型-OutputFormat</h2><p><img alt data-src="https://pic.superbed.cn/item/5da4894b451253d1788af6d0.png" class="lozad"></p>
<h2 id="MapReduce-编程模型"><a href="#MapReduce-编程模型" class="headerlink" title="MapReduce 编程模型"></a>MapReduce 编程模型</h2><ul>
<li>Map阶段<ul>
<li>InputFormat(默认为TextInputFormat)</li>
<li>Mapper</li>
<li>Combiner(local Reducer)</li>
<li>Partitioner</li>
</ul>
</li>
<li>Reduce阶段<ul>
<li>Reducer</li>
<li>OutputFormat</li>
</ul>
</li>
</ul>
<h2 id="MapReduce-Shuffle和排序"><a href="#MapReduce-Shuffle和排序" class="headerlink" title="MapReduce Shuffle和排序"></a>MapReduce Shuffle和排序</h2><p>MapReduce确保每个reduce的输入都是按键排序的。系统指定排序的过程(即map输出作为reduce的输入)称为shuffle。<br>理解shuffle的过程有助于我们理解MapReduce的工作机制和优化MapReduce。</p>
<h3 id="Map端："><a href="#Map端：" class="headerlink" title="Map端："></a>Map端：</h3><ul>
<li>Map输出并非简单输出到磁盘，而是缓冲的方式写入内存并做预排序。当缓冲区满了则刷入磁盘。（<strong>Mapreduce.task.io.sort.mb mapreduce.map.sort.spill.percent</strong>）</li>
<li>Map缓冲区每刷一次磁盘，产生一个溢出文件。Map输出结束后，所有溢出文件会被合并为一个已分区且已排序的输出文件。（<strong>mapreduce.task.io.sort.factor:控制一次合并多少流</strong>）</li>
<li>将压缩后的map结果输出可以减少磁盘写入量和网络传输量。（<strong>Mapreduce.map.output.compress</strong>)</li>
</ul>
<h3 id="Reduce端："><a href="#Reduce端：" class="headerlink" title="Reduce端："></a>Reduce端：</h3><ul>
<li>只要有一个map任务完成，reduce便开始复制其输出，reduce有少量的线程做复制。(<strong>mapreduce.reduce.shuffle.parallelcopies</strong>)</li>
<li>复制完所有map输出后，reduce便会进入合并阶段。合并后的数据作为reduce输入。</li>
</ul>
<p><img alt data-src="https://pic.superbed.cn/item/5da4894d451253d1788af7ae.png" class="lozad"></p>
<h2 id="MapReduce-Combiner函数"><a href="#MapReduce-Combiner函数" class="headerlink" title="MapReduce Combiner函数"></a>MapReduce Combiner函数</h2><p>集群上最紧俏的资源便是网络带宽，因此尽量减少map和reduce阶段的网络传输对MapReduce的性能提升是很重要的。Hadoop为map任务的输出指定了一个合并函数(combiner），合并函数的输出作为reduce的输入。Combiner是的map的输出结果更加紧凑，同时减少了写磁盘和网络传输的数据量。Combiner又称为Local Reducer。<br>例如：<br>map输出结果{(6,1),(7,1),(6,1),(6,1)}，统计每个数字出现的次数。 没有combiner函数时，到reduce的输入数据为： {(6,1),(7,1),(6,1),(6,1)}<br>增加了Combiner函数后，到reduce的输入数据为{(6,3)(7,1)}<br>因此，如果在大量数据的情况下，这样可以减少很大的网络传输。<br><strong>注意：并不是所有的场合都适合做combiner,例如AVG。</strong><br><img alt data-src="https://pic.superbed.cn/item/5da48966451253d1788afcd7.png" class="lozad"></p>
<h2 id="MapReduce-压缩"><a href="#MapReduce-压缩" class="headerlink" title="MapReduce 压缩"></a>MapReduce 压缩</h2><ul>
<li>压缩可以发生在三个地方： 输入数据压缩、map输出压缩、reduce输出压缩。</li>
<li>压缩的优点：减少网络I/O，减少磁盘占用。</li>
<li>压缩的缺点：增加CPU计算量。</li>
<li>选择压缩格式 <ul>
<li>速度 or 空间。 </li>
<li>支持分割机制的压缩。Gzip-&gt;bzip-&gt;lzo。</li>
</ul>
</li>
<li>MapReduce中如何配置压缩： <ul>
<li>MapRed会<ul>
<li>1.输入文件的压缩。根据文件后缀自动识别使用哪种压缩解码器。 </li>
<li>2.输出压缩：mapreduce.output.fileoutputformat.compress,mapreduce.output.fileoutputformat.compress.type(block/Row),mapreduce.output.fileoutputformat.compress.codec</li>
<li>3.Map输出压缩：mapreduce.map.output.compress,mapreduce.map.output.compress.codec</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><img alt data-src="https://pic.superbed.cn/item/5da48948451253d1788af66e.png" class="lozad"></p>
<h2 id="MapReduce-调优"><a href="#MapReduce-调优" class="headerlink" title="MapReduce 调优"></a>MapReduce 调优</h2><ul>
<li>Reducer个数。</li>
<li>输入：大文件优于小文件。</li>
<li>减少网络传输：压缩、combiner</li>
<li>优化Map数量</li>
</ul>
<h2 id="序列化-amp-反序列化"><a href="#序列化-amp-反序列化" class="headerlink" title="序列化&amp;反序列化"></a>序列化&amp;反序列化</h2><p>序列化是指将结构化的数据转化为字节流以便在网络上传输或写入到磁盘进行永久存储的过程，反序列化是指将字节流转换为结构化对象的逆过程。 </p>
<ul>
<li>序列化常见应用场景：进程间通信和永久存储。</li>
<li>Hadoop中，序列化要满足：紧凑、快速、可扩展、支持互相操作。</li>
<li>Hadoop中使用了自己的序列化格式Writable。它绝对紧凑、速度快、但不容易扩展。</li>
</ul>
<h2 id="MapReduce常用数据类型"><a href="#MapReduce常用数据类型" class="headerlink" title="MapReduce常用数据类型"></a>MapReduce常用数据类型</h2><p><img alt data-src="https://pic.superbed.cn/item/5da48958451253d1788af99b.png" class="lozad"></p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script></div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">zheroic</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://zheroic.github.io/2019/10/14/hadoop-3/">https://zheroic.github.io/2019/10/14/hadoop-3/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://zheroic.github.io">zh小企鹅</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/hadoop/">hadoop    </a></div><div class="post_share"><div class="social-share" data-image="https://pic.superbed.cn/item/5da48963451253d1788afc67.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/js/social-share.min.js"></script></div></div><nav class="pagination_post" id="pagination"><div class="prev-post pull-left"><a href="/2019/10/15/software-requirement-3/"><img class="prev_cover lozad" data-src="https://pic.superbed.cn/item/5da5261b451253d1789979cb.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="label">上一篇</div><div class="prev_info"><span>software-requirement-3</span></div></a></div><div class="next-post pull-right"><a href="/2019/10/08/data-science-2/"><img class="next_cover lozad" data-src="https://pic.superbed.cn/item/5d9d62b5451253d17884eb5d.png" onerror="onerror=null;src='/img/404.jpg'"><div class="label">下一篇</div><div class="next_info"><span>数据科学导论-2：数据统计</span></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fa fa-fw fa-thumbs-up" aria-hidden="true"></i><span> 相关推荐</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/2019/09/27/hadoop-1/" title="hadoop离线计算-1:初识Hadoop"><img class="relatedPosts_cover lozad" data-src="https://pic.superbed.cn/item/5d8d569d451253d1782f0d92.png"><div class="relatedPosts_title">hadoop离线计算-1:初识Hadoop</div></a></div><div class="relatedPosts_item"><a href="/2019/10/29/hadoop-4/" title="hadoop离线计算-4：Hadoop资源管理器YARN"><img class="relatedPosts_cover lozad" data-src="https://pic.superbed.cn/item/5d8d569d451253d1782f0d92.png"><div class="relatedPosts_title">hadoop离线计算-4：Hadoop资源管理器YARN</div></a></div><div class="relatedPosts_item"><a href="/2019/09/27/hadoop-2/" title="hadoop离线计算-2：Hadoop分布式文件存储系统"><img class="relatedPosts_cover lozad" data-src="https://pic.superbed.cn/item/5d8d5e78451253d17830baa7.png"><div class="relatedPosts_title">hadoop离线计算-2：Hadoop分布式文件存储系统</div></a></div></div><div class="clear_both"></div></div><hr><div id="post-comment"><div class="comment_headling"><i class="fa fa-comments fa-fw" aria-hidden="true"></i><span> 评论</span></div><div id="gitalk-container"></div><script>var gitalk = new Gitalk({
  clientID: '3875e95f58ea59855e05',
  clientSecret: '335bf09bc36a5dae2109909b8b305e96c7966880',
  repo: 'zheroic.github.io',
  owner: 'zheroic',
  admin: 'zheroic',
  id: md5(decodeURI(location.pathname)),
  language: 'zh-CN'
})
gitalk.render('gitalk-container')</script></div></div></div><footer><div id="footer"><div class="copyright">&copy;2019 By zheroic</div><div class="framework-info"><span>驱动 </span><a href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 </span><a href="https://github.com/jerryc127/hexo-theme-butterfly"><span>Butterfly</span></a></div><div class="footer_custom_text">Hi, welcome to my <a href="https://zheroic.github.io/">blog</a>!</div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><section class="rightside" id="rightside"><a id="to_comment" href="#post-comment"><i class="scroll_to_comment fa fa-comments"></i></a><i class="fa fa-book" id="readmode" title="阅读模式"> </i><i class="fa fa-plus" id="font_plus" title="放大字体"></i><i class="fa fa-minus" id="font_minus" title="缩小字体"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="简繁转换">繁</a><i class="nightshift fa fa-moon-o" id="nightshift" title="夜间模式"></i></section><div class=" " id="post_bottom"><div id="post_bottom_items"><a id="mobile_to_comment" href="#post-comment"><i class="mobile_scroll_to_comment fa fa-comments"></i></a><i class="fa fa-list" id="mobile_toc"></i><div id="toc_mobile"><div class="toc_mobile_headline">目录</div><ol class="toc_mobile_items"><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#Hadoop分布式计算框架MapReduce"><span class="toc_mobile_items-number">1.</span> <span class="toc_mobile_items-text">Hadoop分布式计算框架MapReduce</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#MapReduce-简介"><span class="toc_mobile_items-number">1.1.</span> <span class="toc_mobile_items-text">MapReduce 简介</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#大规模数据处理时，MapReduce在三个层面上的基本构思。"><span class="toc_mobile_items-number">1.1.1.</span> <span class="toc_mobile_items-text">大规模数据处理时，MapReduce在三个层面上的基本构思。</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#MapReduce-计算模型"><span class="toc_mobile_items-number">1.2.</span> <span class="toc_mobile_items-text">MapReduce 计算模型</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#主要由Map和Reduce两部分组成。"><span class="toc_mobile_items-number">1.2.1.</span> <span class="toc_mobile_items-text">主要由Map和Reduce两部分组成。</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#MapReduce示例-文档词频统计WordCount"><span class="toc_mobile_items-number">1.3.</span> <span class="toc_mobile_items-text">MapReduce示例-文档词频统计WordCount</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#MapReduce编程模型-wordCount"><span class="toc_mobile_items-number">1.4.</span> <span class="toc_mobile_items-text">MapReduce编程模型-wordCount</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#MapReduce数据流"><span class="toc_mobile_items-number">1.5.</span> <span class="toc_mobile_items-text">MapReduce数据流</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#MapReduce-编程模型-inputFormat"><span class="toc_mobile_items-number">1.6.</span> <span class="toc_mobile_items-text">MapReduce 编程模型-inputFormat</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#MapReduce-编程模型-split和block"><span class="toc_mobile_items-number">1.7.</span> <span class="toc_mobile_items-text">MapReduce 编程模型-split和block</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#MapReduce编程模型-inputFormat"><span class="toc_mobile_items-number">1.8.</span> <span class="toc_mobile_items-text">MapReduce编程模型-inputFormat</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#MapReduce编程模型-partitioner"><span class="toc_mobile_items-number">1.9.</span> <span class="toc_mobile_items-text">MapReduce编程模型-partitioner</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#MapReduce编程模型-OutputFormat"><span class="toc_mobile_items-number">1.10.</span> <span class="toc_mobile_items-text">MapReduce编程模型-OutputFormat</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#MapReduce-编程模型"><span class="toc_mobile_items-number">1.11.</span> <span class="toc_mobile_items-text">MapReduce 编程模型</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#MapReduce-Shuffle和排序"><span class="toc_mobile_items-number">1.12.</span> <span class="toc_mobile_items-text">MapReduce Shuffle和排序</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#Map端："><span class="toc_mobile_items-number">1.12.1.</span> <span class="toc_mobile_items-text">Map端：</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#Reduce端："><span class="toc_mobile_items-number">1.12.2.</span> <span class="toc_mobile_items-text">Reduce端：</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#MapReduce-Combiner函数"><span class="toc_mobile_items-number">1.13.</span> <span class="toc_mobile_items-text">MapReduce Combiner函数</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#MapReduce-压缩"><span class="toc_mobile_items-number">1.14.</span> <span class="toc_mobile_items-text">MapReduce 压缩</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#MapReduce-调优"><span class="toc_mobile_items-number">1.15.</span> <span class="toc_mobile_items-text">MapReduce 调优</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#序列化-amp-反序列化"><span class="toc_mobile_items-number">1.16.</span> <span class="toc_mobile_items-text">序列化&amp;反序列化</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#MapReduce常用数据类型"><span class="toc_mobile_items-number">1.17.</span> <span class="toc_mobile_items-text">MapReduce常用数据类型</span></a></li></ol></li></ol></div></div></div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script async src="/js/search/local-search.js"></script><script src="/js/nightshift.js"></script><script src="/js/tw_cn.js"></script><script>translateInitilization()

</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@1.2.2/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script><script>const observer = lozad(); // lazy loads elements with default selector as '.lozad'
observer.observe();</script><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章"></div></div></div><hr><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>由</span> <a href="https://github.com/wzpan/hexo-generator-search" style="color:#49B1F5;">hexo-generator-search</a>
 <span>提供支持</span></div></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div></body></html>